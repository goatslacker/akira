# Runtime tests for Memory

# Functions.mem
#
[1, 2, 3] | head | (\(a) -> assert: a == 1)
[1, 2, 3] | init | (\(a, b) -> (
  assert: a == 1
  assert: b == 2
))
[1, 2, 3] | tail | (\(a, b) -> (
  assert: a == 2
  assert: b == 3
))
[1, 2, 3] | last | (\(a) -> assert: a == 3)
#(\() -> (
#  print: 'in IEF'
#
#  doFlip(a, b) -> ret: a, b | flip
#  lastEl(a) -> foldr: doFlip, a
#
#  [[1, 2, 3]] | lastEl | (\(a) -> assert: a == 3)
#))

mapper = partial: map, square
[[1, 2, 3]] | mapper | (\(a, b, c) -> (
  assert: a == 1
  assert: b == 4
  assert: c == 9
#  assert: eq, b, 4
#  assert: eq, c, 9
))

# Pipes, Anonymous functions, assertions
[[1, 2, 3]] | (\(list) -> map: square, list) | (\(a, b, c) -> (
  assert: a == 1
#  assert: eq, a, 1
#  assert: eq, b, 4
#  assert: eq, c, 9
))

print: 'All tests completed'
