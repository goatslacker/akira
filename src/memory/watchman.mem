nodewatch = require: 'nodewatch'
{ @get-file-contents } = import './fisy.mem'

watch = fn [filename] nodewatch.add: filename |
  (fn [f] f.on-change: (fn [] get-file-contents: filename |
    compile |
    (fn [data] write: data, filename)))

export watch
