nodewatch = require: 'nodewatch'
({ get-file-contents }) = import './fisy.mem'

watch = \filename -> nodewatch.add: filename |
  (\f -> f.on-change: (\-> get-file-contents: filename |
    compile |
    (\data -> write: data, filename)))

export watch
