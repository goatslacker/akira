var TypeSystem = require('TypeSystem');
var escodegen = require('escodegen');

function obj2str(val) {
  var type = TypeSystem.getType(val);
  switch (type) {
  case 'object':
    if (val.__akira) {
      return escodegen.generate(val.__akira);
    }
    return '{ ' + Object.keys(val).map(function (key) {
      return key + ': ' + obj2str(val[key]);
    }).join(', ') + ' }';
  case 'array':
    return '[' + val.map(function (v) {
      return obj2str(v);
    }) + ']';
  case 'regexp':
    return RegExp.prototype.toString.call(val);
  case 'string':
    return '"' + val + '"';
  default:
    return val;
  }
}

module.exports = obj2str;
